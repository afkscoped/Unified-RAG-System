# [ANTIGRAVITY] UNIFIED CONFIGURATION HUB
# Integrated configuration for Standard RAG, Story Weaver, and Elite Research Mode.
# Optimized for GTX 1650 (4GB VRAM).

project:
  name: "Antigravity Unified Intelligence Platform"
  version: "2.5.0"

model:
  # Embedding model (small, fast, good quality)
  embedding: "BAAI/bge-small-en-v1.5"
  embedding_dim: 384
  
  # LLM configuration
  llm_provider: "groq"
  llm_model: "llama-3.3-70b-versatile"
  llm_temperature: 0.2
  llm_max_tokens: 2048
  
  # Device settings
  device: null  # null (auto-detect) | "cuda" | "cpu"
  use_fp16: true

search:
  # Chunking (Legacy/Standard)
  chunk_size: 1000
  chunk_overlap: 200
  
  # Retrieval
  top_k: 5
  top_k_rerank: 10
  
  # Hybrid search defaults
  semantic_weight: 0.5
  lexical_weight: 0.5
  
  # RRF fusion parameter
  rrf_k: 60

preprocessing:
  layout_aware: true
  chunking:
    method: "semantic" # semantic | recursive
    semantic_threshold: 0.85
    max_chunk_size: 1000
  enrichment:
    ner_enabled: true
    topic_modeling: true

retrieval:
  multi_vector:
    hyde_enabled: true
    colbert_enabled: true
  reranking:
    model: "cross-encoder/ms-marco-MiniLM-L-6-v2"
    top_n: 5

finetuning:
  base_model: "microsoft/Phi-3-mini-4k-instruct"
  quantization: "4bit"
  lora:
    r: 16
    alpha: 32
    dropout: 0.05
    target_modules: ["q_proj", "k_proj", "v_proj", "o_proj"]

evaluation:
  metrics: ["faithfulness", "answer_relevance", "context_precision"]

optimization:
  memory:
    vram_cap_gb: 3.3
  cache:
    l1_enabled: true
    l2_enabled: true
  rate_limit: 5

cache:
  enabled: true
  similarity_threshold: 0.95
  max_items: 100
  ttl_seconds: 3600

memory:
  max_ram_gb: 12.0
  max_vram_gb: 3.8
  embedding_batch_size: 16

paths:
  documents: "data/documents"
  embeddings: "data/embeddings"
  cache: "data/cache"
  graphs: "data/graphs"
  finetuning: "data/finetuning"
  logs: "logs"

# Story Mode Configuration
story:
  mode: "dual"

# Graph RAG Configuration
graph_rag:
  enable_graph: true
  graph_backend: "networkx"
  max_hops: 3
  min_relationship_strength: 0.3
  
  entity_extraction:
    spacy_model: "en_core_web_sm"
    custom_labels:
      - CHARACTER
      - LOCATION
      - EVENT
      - THEME
